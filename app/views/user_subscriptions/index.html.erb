<% # https://stripe.com/docs/billing/subscriptions/cards %>

<% if @user_subscription.subscribed? %>
  <%= form_for @user_subscription, method: "delete", html: {id: "subscription-form"}, url: subscribe_user_subscriptions_path do |f| %>
    <div id="card-element" class="MyCardElement">
      <% # Elements will create input elements here %>
    </div>
    <div id="card-errors" role="alert"></div>
    <%= f.submit "購読を解除する" %>
  <% end %>
<% else %>
  <%= form_for @user_subscription, method: "post", html: {id: "subscription-form"}, url: subscribe_user_subscriptions_path do |f| %>
    <caption>
      テスト用カード番号：<a href="https://stripe.com/docs/billing/subscriptions/cards#test-integration" target="_blank">Subscriptions with card payments | Stripe Billing</a>
    </caption>
    <div id="card-element">
      <% # Elements will create input elements here %>
    </div>
    <div id="card-errors" role="alert"></div>
    <%= f.submit "月額課金1,000円" %>
  <% end %>
<% end %>

